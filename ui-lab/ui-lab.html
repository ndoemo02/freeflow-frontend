<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FreeFlow</title>
<style>
  :root{
    /* ROZMIARY LOGO-GUZIKA */
    --logo-final: 260px;        /* docelowy rozmiar kropli na mobile */
    --logo-final-desktop: 320px;/* docelowy rozmiar na >768px */
    --drop-time: 1100ms;        /* czas spadania */
    --squash-time: 180ms;       /* ugięcie po lądowaniu */
    --bounce-time: 520ms;       /* odbicie */
    --shadow: 0 14px 42px rgba(0,0,0,.45);
  }

  html,body{height:100%}
  body{
    margin:0; overflow:hidden;
    background: #0b0f14 url('Background.png') center/cover no-repeat fixed;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  /* KILL-SWITCH starego żółtego przycisku/dema */
  .mic, .mic-circle, .mic-dot, .voice-cta, .record-btn, .record-button, .cta-mic {
    display:none !important;
  }

  /* Kontener na guzik (pozycja przy dolnej krawędzi) */
  .mic-wrap{
    position:fixed;
    left:50%; bottom:18px; transform:translateX(-50%);
    z-index:9999;                      /* NA WIERZCHU */
    width:var(--logo-final); height:var(--logo-final);
    display:grid; place-items:center;
    pointer-events:auto;
    filter: drop-shadow(var(--shadow));
  }

  /* Sam guzik z logo */
  .mic-btn{
    width:100%; height:100%; border:0; padding:0; margin:0;
    background: transparent;
    display:grid; place-items:center;
    cursor:pointer;
  }
  .mic-btn img{
    width:100%; height:100%; object-fit:contain;
    will-change: transform, filter;
    transform-origin: 50% 90%;
    /* sekwencja animacji przy starcie strony */
    animation:
      dropDown var(--drop-time) cubic-bezier(.22,.9,.27,1) 0ms 1 forwards,
      squash   var(--squash-time) cubic-bezier(.2,.9,.3,1) calc(var(--drop-time)) 1 both,
      rebound  var(--bounce-time) cubic-bezier(.2,.8,.25,1) calc(var(--drop-time) + var(--squash-time)) 1 both;
  }

  /* Efekt "słuchania" po kliknięciu (delikatny puls) */
  .mic-btn.listening img{
    animation: listening 1400ms ease-in-out 0ms infinite;
    filter: drop-shadow(0 0 24px rgba(255,140,0,.35));
  }

  /* Animacje */
  @keyframes dropDown{
    0%   { transform: translateY(calc(-100vh - 200px)) scale(.38) rotate(0deg); }
    85%  { transform: translateY(-22px) scale(.98) rotate(.5deg); }
    100% { transform: translateY(0)     scale(1)    rotate(0deg); }
  }
  @keyframes squash{
    0%   { transform: translateY(0) scale(1,1); }
    100% { transform: translateY(0) scale(1.06,.94); }
  }
  @keyframes rebound{
    0%   { transform: translateY(0) scale(1.06,.94); }
    35%  { transform: translateY(-10px) scale(.99,1.03); }
    100% { transform: translateY(0) scale(1,1); }
  }
  @keyframes listening{
    0%   { transform: scale(1);    filter: drop-shadow(0 0 14px rgba(255,140,0,.25)); }
    50%  { transform: scale(1.04); filter: drop-shadow(0 0 26px rgba(255,140,0,.45)); }
    100% { transform: scale(1);    filter: drop-shadow(0 0 14px rgba(255,140,0,.25)); }
  }

  /* RESPONSYWNOŚĆ – na większych ekranach powiększamy guzik */
  @media (min-width: 768px){
    .mic-wrap{ width:var(--logo-final-desktop); height:var(--logo-final-desktop); }
  }

  /* Prostokąt „sceny” w czasie spadania (tylko kosmetyka – brak interakcji) */
  .stage{
    position:fixed; inset:0; pointer-events:none;
  }
</style>
</head>
<body>

  <!-- „Scena” (opcjonalne – pozwala kiedyś dodać rozprysk/fale) -->
  <div class="stage" aria-hidden="true"></div>

  <!-- Nasz duży logo-guzik (kropla) -->
  <div class="mic-wrap">
    <button class="mic-btn" id="voiceBtn" aria-label="Click to Voice">
      <img src="Freeflow-logo.png" alt="FreeFlow Logo" width="1024" height="1024" decoding="async" />
    </button>
  </div>

<script>
  // Minimalna logika kliknięcia – możesz tu wpiąć swoje start/stop voice
  const btn = document.getElementById('voiceBtn');
  let listening = false;

  btn.addEventListener('click', () => {
    listening = !listening;
    btn.classList.toggle('listening', listening);

    // TODO: wpiąć realny start/stop mikrofonu:
    // if(listening) startVoice(); else stopVoice();
    console.log('[FreeFlow] Voice button:', listening ? 'START' : 'STOP');
  });

  // Na wypadek twardego cache – mały restart animacji po załadowaniu
  window.addEventListener('load', () => {
    const img = btn.querySelector('img');
    // Wymuszamy reflow, by animacja dropa na pewno zagrała
    img.style.animation = 'none';
    void img.offsetWidth;
    img.style.animation =
      `dropDown var(--drop-time) cubic-bezier(.22,.9,.27,1) 0ms 1 forwards,
       squash var(--squash-time) cubic-bezier(.2,.9,.3,1) calc(var(--drop-time)) 1 both,
       rebound var(--bounce-time) cubic-bezier(.2,.8,.25,1) calc(var(--drop-time) + var(--squash-time)) 1 both`;
  });
</script>
</body>
</html>
